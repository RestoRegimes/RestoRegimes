var Easing={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};
(function(){"use strict";var lastTime=0,vendors=["ms","moz","webkit","o"],x;for(x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(id){window.clearTimeout(id)}}})();
var PrismSlider=function(window,undefined){"use strict";function PrismSlider(settings){this.settings=settings;this.container=settings.container.element;this.slides=settings.slides.slice();this.slidesLength=this.slides.length;this.mask=settings.mask;this.duration=settings.duration;this.easing=settings.easing;this.slidesIndex=0;this.prevSlidesIndex=0;this.indexOffset=1;this.isAnimated=false}PrismSlider.prototype.init=function(){this.addCanvas_();if(this.mask)this.addMask_();setTimeout(this.addSlides_.bind(this),0)};PrismSlider.prototype.addCanvas_=function(){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.canvas.width=this.settings.container.sizes.w;this.canvas.height=this.settings.container.sizes.h;this.container.appendChild(this.canvas)};PrismSlider.prototype.addMask_=function(){var path=this.mask.source;var callback=this.renderMask_.bind(this);this.mask.source=this.loadImage_(path,callback)};PrismSlider.prototype.addSlides_=function(){this.slides.forEach(function(path,i){var callback=i===0?this.renderSlide_.bind(this,i):null;this.slides[i]=this.loadImage_(path,callback)},this)};PrismSlider.prototype.loadImage_=function(path,callback){var image=new Image;image.onload=callback;image.src=path;return image};PrismSlider.prototype.renderMask_=function(){var centerX=this.canvas.width/2-this.settings.container.sizes.w/2;var centerY=this.canvas.height/2-this.settings.container.sizes.h/2;var w=this.settings.container.sizes.w;var h=this.settings.container.sizes.h;this.context.drawImage(this.mask.source,centerX,centerY,w,h)};PrismSlider.prototype.renderSlide_=function(i,progress){progress=isNaN(progress)||progress===undefined?0:progress;var slide=this.slides[i];var x=this.canvas.width*(i-progress);var y=0;var w=this.canvas.width;var h=this.canvas.height;if(this.mask)this.context.globalCompositeOperation="source-atop";this.context.save();if(this.mask)this.applyEffects_();this.context.drawImage(slide,x,y,w,h);this.context.restore()};PrismSlider.prototype.applyEffects_=function(){if(this.mask.effects.flip)this.flip_();if(this.mask.effects.rotate>0)this.rotate_()};PrismSlider.prototype.flip_=function(){var axes=this.mask.effects.flip;if(axes==="X"){this.context.translate(this.canvas.width,0);this.context.scale(-1,1)}if(axes==="Y"){this.context.translate(0,this.canvas.height);this.context.scale(1,-1)}};PrismSlider.prototype.rotate_=function(){var radians=this.mask.effects.rotate*(Math.PI/180);this.context.translate(this.canvas.width/2,this.canvas.height/2);this.context.rotate(radians);this.context.translate(-this.canvas.width/2,-this.canvas.height/2)};PrismSlider.prototype.slideTo=function(index){if(this.isAnimated||index===this.slidesIndex)return;this.prevSlidesIndex=this.slidesIndex;this.slidesIndex=index;var indexOffset=(this.prevSlidesIndex-this.slidesIndex)*-1;this.indexOffset=indexOffset>0?indexOffset:indexOffset*-1;this.animate_()};PrismSlider.prototype.animate_=function(){var end=Date.now()+this.duration;this.isAnimated=true;this.ticker_(end)};PrismSlider.prototype.ticker_=function(end){var now=Date.now();var remaining=end-now;var easing=this.easing(remaining/this.duration)*this.indexOffset;var i,progress,slide;if(this.slidesIndex>this.prevSlidesIndex){progress=this.slidesIndex-easing;for(i=0;i<=this.indexOffset;i++){slide=this.slidesIndex-i;this.renderSlide_(slide,progress)}}else{progress=this.slidesIndex+easing;for(i=0;i<=this.indexOffset;i++){slide=this.slidesIndex+i;this.renderSlide_(slide,progress)}}if(remaining<50){this.indexOffset=1;this.renderSlide_(this.slidesIndex);this.isAnimated=false;return}window.requestAnimationFrame(this.ticker_.bind(this,end))};return PrismSlider}(window);
var slideshow=function(window,undefined){"use strict";var navigation={selector:".navigation",element:null,bullet:"li",attrs:{active:"active",index:"data-index"}};var container={selector:".prism-slider",element:null,sizes:{w:1024,h:768}};var slides=["rrcore/images/Bg/Bg1.jpg","rrcore/images/Bg/Bg2.jpg","rrcore/images/Bg/Bg3.jpg"];var masks=[{source:"rrcore/images/masks/prism-a.svg",effects:{flip:"X",rotate:45}},{source:"rrcore/images/masks/prism-b.svg",effects:{flip:false,rotate:180}},{source:"rrcore/images/masks/prism-c.svg",effects:{flip:"Y",rotate:35}}];var easing=Easing.easeInOutQuint;var duration=5e3;var instances={};var count=0;var auto_play_interval=1e4;function init(){getContainer_();initSlider_();initPrism_();addNavigation_();addEvents_();setTimeout(function(){window.setInterval(function(){Auto_();for(var i=0;i<slides.length;i++){navigation.element.childNodes[i].className=""}navigation.element.childNodes[count].className=navigation.attrs.active},auto_play_interval)},5e3)}function getContainer_(){container.element=document.querySelector(container.selector)}function initSlider_(){instances.slider=new PrismSlider({container:container,slides:slides,mask:false,duration:duration,easing:easing});instances.slider.init()}function initPrism_(){masks.forEach(function(mask,i){var name="mask_"+i;instances[name]=new PrismSlider({container:container,slides:slides,mask:mask,duration:duration,easing:easing});instances[name].init()})}function addNavigation_(){navigation.element=document.querySelector(navigation.selector);slides.forEach(function(slide,i){var bullet=document.createElement(navigation.bullet);bullet.setAttribute(navigation.attrs.index,i);if(i===0)bullet.className=navigation.attrs.active;navigation.element.appendChild(bullet)})}function addEvents_(){navigation.element.addEventListener("click",function(e){var bullet=e.target;var isBullet=bullet.nodeName===navigation.bullet.toUpperCase();if(isBullet&&!instances.slider.isAnimated){for(var i=0;i<navigation.element.childNodes.length;i++){navigation.element.childNodes[i].className=""}bullet.className=navigation.attrs.active;var index=Number(bullet.getAttribute(navigation.attrs.index));slideAllTo_(index)}})}function Auto_(){if(count==slides.length-1)count=0;else count++;slideAllTo_(count)}function slideAllTo_(index){for(var key in instances){if(instances.hasOwnProperty(key)){instances[key].slideTo(index)}}}var count=0;return{init:init}}(window);window.onload=slideshow.init;